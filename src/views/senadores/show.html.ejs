<div class="grid-container">
  <img id="img-senador" src="<%= senador.url_foto ? senador.url_foto : 'https://d1nhio0ox7pgb.cloudfront.net/_img/o_collection_png/green_dark_grey/256x256/plain/user.png'%>" alt="Foto de senador">
  <h1 id="nombre-senador"> <%= senador.nombre + " " + senador.apellido_paterno + " " + senador.apellido_materno %> </h1>
  <div id="informacion-personal">
    <a href="<%= senador.url_curriculum %>" target="_blank">Ver Currículum</a> ||
    <a href="<%= senador.url_twitter %>" target="_blank"> Ver Twitter</a>
    <div id="comisiones">
      <% if (comitions.length === 0) { %>
        Este senador no participa en comisiones.
      <% } else { %>
        Participa en las comisiones de
        <% for (i = 0; i < comitions.length; i++) { %>
          <%= comitions[i] %>,
        <% } %>
      <% } %>
    </div>
  </div>
  <div class="senador__asistencia">
    <% if (Object.keys(assistances).length !== 0) { %>
      <% const total = assistances.total_asistencias +assistances.total_inasistencias +assistances.total_justif %>
      <div class="senador__asistencia-item">
        <p class="senador__asistencia-porcentaje senador__asistencia-porcentaje--asistencia"><%= Math.round(assistances.total_asistencias / total * 100) %>%</p>
        <p class="senador__asistencia-label">Asistencias</p>
      </div>
      <div class="senador__asistencia-item">
        <p class="senador__asistencia-porcentaje senador__asistencia-porcentaje--inasistencia"><%= Math.round(assistances.total_inasistencias / total * 100) %>%</p>
        <p class="senador__asistencia-label">Inasistencias</p>
      </div>
      <div class="senador__asistencia-item">
        <p class="senador__asistencia-porcentaje senador__asistencia-porcentaje--justificada"><%= Math.round(assistances.total_justif / total * 100) %>%</p>
        <p class="senador__asistencia-label">Inasistencias justificadas</p>
      </div>
    <% } else { %>
      <p class="senador__asistencia-label senador__asistencia-label--red">No hay información disponible de las asistencias de este senador</p>
    <% } %>
  </div>
  <a class="twitter-timeline" href="<%= senador.url_twitter %>" data-height="1000">
    Tweets by <%= senador.nombre %>
  </a>
  <div id="proyectos">
    <h1 id="titulo-proyectos">Proyectos <span id="proyectos-totales">(<%= proyectos.length %>)</span></h1>
    <ul class="lista-proyectos" id="lista-proyectos">
      <% proyectos.forEach((proyecto) => { %>
        <li class="lista-proyectos__item">
          <a class="lista-proyectos__link" href="/proyectos-ley/show/<%= proyecto.id %>">
            <div class="lista-proyectos__meta">
              <p class="lista-proyectos__boletin"><%=proyecto.boletin%></p>
              <p class="lista-proyectos__fecha"><%=proyecto.fecha%></p>
            </div>
            <p class="lista-proyectos__resumen"><%=proyecto.resumen%></p>
          </a>
        </li>
      <% }) %>
    </ul>
  </div>
</div>

<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
